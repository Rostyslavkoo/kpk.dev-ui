(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dca67e8"],{"053f":function(e,t,r){"use strict";r("6472")},6472:function(e,t,r){},e97a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("AdminWrapper",[r("PageComponent")],1)},a=[],i=r("a2db"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"px-3 mb-5"},[r("VRow",{attrs:{"no-gutters":"",align:"center",justify:"space-between"}},[r("VRow",[r("VCol",{attrs:{cols:"auto"}},[r("VBtn",{staticClass:"white--text",attrs:{text:"",rounded:"",color:"grey darken-1"},on:{click:e.onChangeFolder}},[r("VIcon",{attrs:{left:""}},[e._v(" mdi-folder-edit-outline ")]),e._v(e._s(e.folderName||"--"))],1)],1),r("VIcon",{attrs:{small:""}},[e._v("mdi-chevron-right")]),r("VCol",{attrs:{cols:"auto"}},[e.page?r("VBtn",{attrs:{text:"",color:"primary",rounded:""}},[r("VIcon",{attrs:{left:""}},[e._v(" mdi-file-edit-outline ")]),e._v(e._s(e.page.name||"--")+" ")],1):e._e()],1)],1),r("div",{staticClass:"d-flex"},[r("VCol",{attrs:{cols:"auto"}},[r("VBtn",{attrs:{rounded:"",color:"error",text:""},on:{click:e.deletePage}},[r("VIcon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Видалити")],1)],1),r("VCol",{attrs:{cols:"auto"}},[r("VBtn",{attrs:{rounded:"",color:"пкфн",text:""},on:{click:e.onCancel}},[r("VIcon",{attrs:{left:""}},[e._v("mdi-close")]),e._v("Скасувати зміни")],1)],1),r("VCol",{attrs:{cols:"auto"}},[r("VBtn",{attrs:{rounded:"",color:"success"},on:{click:e.onCreate}},[r("VIcon",{attrs:{left:""}},[e._v("mdi-check-all")]),e._v("Зберегти")],1)],1)],1)],1),r("VDivider",{staticClass:"mb-5"}),e.page?r("VRow",{staticClass:"h-auto",attrs:{"no-gutters":""}},[r("VCol",[r("vue-editor",{staticClass:"editor w-100 pl-2",model:{value:e.page.html,callback:function(t){e.$set(e.page,"html",t)},expression:"page.html"}})],1)],1):e._e(),e.page.files?r("div",[r("VDivider",{staticClass:"my-5"}),e._l(e.page.files,(function(t){return r("VCard",{key:t.id},[r("VCardTitle",[r("VRow",{attrs:{justify:"space-between",align:"center"}},[r("VCol",{staticClass:"text-left",attrs:{cols:"auto"}},[e._v(e._s(t.title))]),r("VRow",{attrs:{"no-gutters":"",justify:"end",align:"center"}},[r("VCol",{staticClass:"text-right mx-1",attrs:{cols:"auto"}},[r("VBtn",{attrs:{dense:"",color:"warning",rounded:""}},[r("VIcon",{attrs:{left:"",dense:""}},[e._v("mdi-pencil")]),e._v("Змінити")],1)],1),r("VCol",{staticClass:"text-right mx-1",attrs:{cols:"auto"}},[r("VBtn",{attrs:{color:"error",fab:"",small:""}},[r("VIcon",{attrs:{dense:""}},[e._v("mdi-close")])],1)],1)],1)],1)],1),r("VCardSubtitle",[e._v("PDF-файл")]),r("VCardText",[r("VRow",{attrs:{"no-gutters":"",justify:"center"}},[r("VCol",{attrs:{cols:"8"}},[r("VuePdfApp",{staticStyle:{height:"80vh"},attrs:{"page-scale":"40",theme:"light",pdf:t.file,"file-name":t.title},on:{"after-created":e.afterCreated}})],1)],1)],1)],1)}))],2):e._e(),r("VRow",{attrs:{justify:"end"}},[r("v-speed-dial",{attrs:{transition:"slide-y-reverse-transition"},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:"",small:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?r("v-icon",[e._v(" mdi-close ")]):r("v-icon",[e._v(" mdi-plus ")])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green"},on:{click:function(t){e.pdfVisible=!0}}},[r("v-icon",[e._v("mdi-file-pdf-box")])],1),r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"}},[r("v-icon",[e._v("mdi-calendar-text")])],1)],1)],1),e.editFolderVisivle?r("AddNewPageDialog",{attrs:{visible:e.editFolderVisivle,isEditFolder:e.isEditFolder,editFolder:e.page.folder},on:{close:function(t){e.editFolderVisivle=!1},update:e.changedFolder}}):e._e(),e.pdfVisible?r("AddNewPdfDIalog",{attrs:{visible:e.pdfVisible},on:{close:function(t){e.pdfVisible=!1},onAddPDF:e.onAddPDF}}):e._e()],1)},s=[],l=r("5530"),c=r("1da1"),d=(r("b0c0"),r("96cf"),r("5873")),u=r("386d"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VDialog",{on:{"click:outside":function(e){return this.$v.$reset()}},model:{value:e.visiblity,callback:function(t){e.visiblity=t},expression:"visiblity"}},[r("VCard",{attrs:{width:500}},[r("VCardTitle",[e._v("Додати PDF-файл")]),r("VCardText",{staticClass:"mt-4"},[r("VRow",[r("VCol",[r("VTextField",{attrs:{label:"Заголовок","prepend-icon":"mdi-clipboard-text",outlined:"",dense:"",counter:"70",maxlength:"150","hide-details":"auto","error-messages":e.TitleError},on:{blur:function(t){return e.$v.pdf.title.$touch()}},model:{value:e.pdf.title,callback:function(t){e.$set(e.pdf,"title",t)},expression:"pdf.title"}})],1)],1),r("VRow",[r("VCol",[r("v-file-input",{attrs:{dense:"",counter:"",label:"PDF-Файл","prepend-icon":"mdi-file-pdf-box",outlined:"",accept:"application/pdf","show-size":1e3,rules:e.rules,"hide-details":"auto","error-messages":e.FileError},on:{change:e.onFileChange,blur:function(t){return e.$v.pdf.file.$touch()}},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.index,a=t.text;return[n<2?r("v-chip",{attrs:{label:"",small:""}},[e._v(" "+e._s(a)+" ")]):2===n?r("span",{staticClass:"text-overline grey--text text--darken-3 mx-2"},[e._v(" +"+e._s(e.pdf.file.length-2)+" File(s) ")]):e._e()]}}]),model:{value:e.pdf.file,callback:function(t){e.$set(e.pdf,"file",t)},expression:"pdf.file"}})],1)],1)],1),r("VCardActions",[r("VSpacer"),r("VBtn",{attrs:{color:"error"},on:{click:e.onCancel}},[e._v(" Скасувати ")]),r("VBtn",{attrs:{color:"primary"},on:{click:e.onCreate}},[e._v("Зберегти ")])],1)],1)],1)},p=[],v=r("1dce"),m=r("b5ae"),g={mixins:[v["validationMixin"]],props:{visible:{require:!0}},data:function(){return{pdf:[],rules:[function(e){return!e||e.size<1e6||"Розмір файлу повинен бути менше 10 MB!"}]}},validations:{pdf:{title:{required:m["required"],maxLength:Object(m["maxLength"])(70)},file:{required:m["required"]}}},methods:{onCancel:function(){this.$v.$reset(),this.pdf=[],this.$emit("close")},onCreate:function(){if(this.$v.$touch(),!this.$v.$invalid)try{var e={};e.title=this.pdf.title,e.file=this.base64pdf,e.id=Date.now(),this.$emit("onAddPDF",e),this.onCancel()}catch(t){alert(t)}},onFileChange:function(e){var t=this;if(console.log(e),e){var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t.base64pdf=e.target.result}}}},computed:{visiblity:{get:function(){return this.visible},set:function(){return this.$emit("close")}},TitleError:function(){var e=[];return this.$v.pdf.title.$dirty?this.$v.pdf.title.maxLength?(!this.$v.pdf.title.required&&e.push("Заголовок обов`язкове поле для заповнення"),e):(e.push("Довжина заголовку має бути менша за 70 символів"),e):e},FileError:function(){var e=[];return this.$v.pdf.file.$dirty?(!this.$v.pdf.file.required&&e.push("Файл обов`язкове поле для заповнення"),e):e}}},h=g,b=r("2877"),V=Object(b["a"])(h,f,p,!1,null,null,null),x=V.exports,C=r("f31e"),_=r("9c03"),w=r("e027"),$=r.n(w),k=(r("ed43"),{mixins:[_["a"]],components:{VueEditor:d["a"],AddNewPageDialog:u["a"],AddNewPdfDIalog:x,VuePdfApp:$.a},data:function(){return{page:[],fab:"",pageId:"",changeFolderVisible:!1,isEditFolder:!1,editFolderVisivle:!1,folderName:"",pdfVisible:!1,numPages:void 0}},watch:{$route:{deep:!0,handler:function(e){this.getPage()}}},mounted:function(){this.getPage()},methods:{afterCreated:function(e){console.log(e),this.pdfjs=e,window._pdf=e},onAddPDF:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.setLoading(!0),r.next=4,C["a"].update(t.$route.params.id,{files:e});case 4:n=r.sent,console.log(n.info),t.page.files={params:e},t.setLoading(!1),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),alert(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},deletePage:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.setLoading(!0),t.next=4,C["a"].delete(e.$route.params.id);case 4:e.$router.push({name:"admin-permission-guard"}),e.setLoading(!1),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getPage:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,C["a"].getOne({_id:e.$route.params.id});case 3:r=t.sent,e.page=r[0],console.log(e.page),e.page?e.folderName=e.page.folder.name:e.$router.push({name:"admin-permission-guard"}),e.setLoading(!1);case 8:case"end":return t.stop()}}),t)})))()},onCreate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],r.html=e.page.html,t.prev=2,t.next=5,C["a"].update(e.$route.params.id,Object(l["a"])({},r));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()},onCancel:function(){},onChangeFolder:function(){this.isEditFolder=!0,this.editFolderVisivle=!0},changedFolder:function(){this.getPage(),this.editFolderVisivle=!1}}}),F=k,y=(r("053f"),Object(b["a"])(F,o,s,!1,null,null,null)),P=y.exports,R={components:{PageComponent:P,AdminWrapper:i["a"]}},D=R,j=Object(b["a"])(D,n,a,!1,null,null,null);t["default"]=j.exports}}]);