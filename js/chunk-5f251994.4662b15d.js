(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f251994"],{"049d":function(e,t,n){},"08ac":function(e,t,n){"use strict";n("bafc")},"21df":function(e,t,n){"use strict";n("ce0a")},2909:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e){if(Array.isArray(e))return i(e)}n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0"),n("ac1f"),n("00b4");function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return r(e)||s(e)||a(e)||o()}},"34e2":function(e,t,n){},"3a8f":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NewsComponent")},r=[],s=n("a2db"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-tabs",{attrs:{"show-arrows":""},model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[n("v-tab",{attrs:{href:"#simpleNews"}},[e._v("Новини")]),n("v-tab",{attrs:{href:"#recentNews"}},[e._v("Нещодавні новини")])],1),n("v-tabs-items",{model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[n("v-tab-item",{attrs:{value:"simpleNews"}},[n("VDivider"),n("SimpleNewComponent")],1),n("v-tab-item",{attrs:{value:"recentNews"}},[n("VDivider"),n("RecentNewsComponent")],1)],1)],1)},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"simple-new"},[n("VRow",{attrs:{justify:"space-between",align:"center","no-gutters":""}},[n("VCol",{attrs:{cols:"3"}},[n("v-select",{attrs:{"prepend-inner-icon":"mdi-filter-variant",items:Object.values(e.categories),"item-value":"_id","item-text":"name",label:"Оберіть категорію",outlined:"",clearable:"","hide-details":"",dense:"",rounded:"","menu-props":{bottom:!0,offsetY:!0}},on:{change:e.changeCategory},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("v-chip",{attrs:{small:"",color:"primary"}},[e._v(e._s(e.tmpGroup=i.name))])]}}]),model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}})],1),n("VCol",{attrs:{cols:"auto"}},[n("VBtn",{attrs:{rounded:"",outlined:"",color:"primary"},on:{click:function(t){e.visible=!0}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-newspaper-plus ")]),e._v("Створити новину ")],1)],1)],1),n("VRow",[n("VCol",[n("NewsList",{attrs:{news:e.news},on:{show:e.showNews,deleteNew:e.deleteNew}})],1)],1),e.visible?n("AddNewDialog",{attrs:{visible:e.visible,chosenNews:e.clickNews},on:{addNews:e.addNews,close:function(t){e.visible=!1,e.clickNews=null}}}):e._e()],1)},l=[],u=n("1da1"),d=n("2909"),m=(n("96cf"),n("4de4"),n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VRow",[n("VCol",[n("v-item-group",[n("div",[e.news.length>0?n("v-row",{attrs:{"no-gutters":"",justify:"start"}},e._l(e.news,(function(t){return n("v-col",{key:t._id,attrs:{cols:"auto"}},[n("v-item",{scopedSlots:e._u([{key:"default",fn:function(i){i.active;return[n("v-card",{staticClass:"align-end mb-10 new-card ma-3",attrs:{width:"auto",color:""},on:{click:function(n){return e.detailNew(t)}}},[n("v-btn",{staticClass:"category",attrs:{absolute:"",top:"",left:"",color:"primary",tile:""}},[e._v(" "+e._s(t.category.name)+" ")]),t.main_img?n("v-img",{attrs:{height:"140","lazy-src":t.main_img,src:t.main_img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}],null,!0)}):n("v-img",{attrs:{height:"140",src:"https://picsum.photos/350/165?random"}}),n("v-card-actions",[n("VRow",{staticClass:"new-title"},[n("VCol",{attrs:{cols:"12"}},[n("span",[e._v(e._s(t.title||"--"))]),n("VRow",[n("VCol",{staticClass:"timer",attrs:{cols:"5"}},[e._v(e._s(t.created_time.substr(0,10)||"--"))]),e.moment.duration(e.moment(t.created_time).diff(e.moment())).asDays()<=0&&e.moment.duration(e.moment(t.created_time).diff(e.moment())).asDays()>-1?n("VCol",{staticClass:"timer"},[e._v(" "+e._s(e.moment(t.created_time).locale("uk").startOf("hours").fromNow()||"--")+" ")]):e._e()],1)],1)],1),n("v-spacer"),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on,s=i.attrs;return[n("VBtn",e._g(e._b({attrs:{icon:"",color:"error darken-1"},on:{dblclick:function(n){return e.onDelete(t)},click:function(e){e.stopPropagation()}}},"VBtn",s,!1),r),[n("VIcon",[e._v(" mdi-delete")])],1)]}}],null,!0)},[n("span",[e._v("Щоб видалити, потрібно натиснути двічі")])])],1)],1)]}}],null,!0)})],1)})),1):n("v-row",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"10vh"}},[e._v("Новин ще немає")])],1)])],1)],1)}),v=[],g={data:function(){return{}},props:{news:{require:!0}},mounted:function(){console.log("Новини",this.news)},methods:{detailNew:function(e){this.$emit("show",e)},onDelete:function(e){this.$emit("deleteNew",e._id)}}},h=g,w=(n("e116"),n("2877")),p=Object(w["a"])(h,m,v,!1,null,"158cc563",null),f=p.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{attrs:{scrollable:""},on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[n("VCard",{attrs:{width:"700",disable:e.isLoading,loading:e.isLoading}},[e.chosenNews?n("VCardTitle",[n("VRow",{attrs:{align:"center"}},[n("VCol",[e._v("Оновити новину")]),n("VSpacer"),e.news.created_time?n("div",{staticClass:"time"},[e._v(" "+e._s(e.moment(e.news.created_time).locale("uk").format("MMMM Do YYYY, h:mm a")||"--")+" ")]):n("div",{staticClass:"time"},[n("v-skeleton-loader",{attrs:{type:"chip"}})],1)],1)],1):n("VCardTitle",[e._v(" Створити Новину ")]),n("VDivider",{staticClass:"mx-5"}),n("VCardText",[n("VRow",{staticClass:"mt-5"},[n("VCol",{attrs:{cols:"6"}},[n("v-select",{attrs:{"prepend-icon":"mdi-shape",items:Object.values(e.categories),"item-value":"_id","item-text":"name",label:"Категорія","error-messages":e.CategoryError,"hide-details":!e.CategoryError.length,outlined:"",clearable:"",dense:""},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("v-chip",{attrs:{small:"",color:"primary"}},[e._v(e._s(i.name))])]}}]),model:{value:e.news.category,callback:function(t){e.$set(e.news,"category",t)},expression:"news.category"}})],1),n("VCol",{attrs:{cols:"6"}},[n("VBtn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.visibleAdd=!0}}},[n("VIcon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Додати нову категорію")],1)],1)],1),n("VRow",[n("VCol",[n("VTextField",{attrs:{label:"Заголовок","prepend-icon":"mdi-clipboard-text",outlined:"",dense:"",counter:"70","error-messages":e.TitleError,maxlength:"150"},nativeOn:{input:function(t){return e.$v.news.title.$touch()}},model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1)],1),n("VRow",[n("VCol",[e.chosenNews?n("VCard",[n("v-img",{attrs:{height:"140","lazy-src":e.news.main_img,src:e.news.main_img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}])}),n("v-card-actions",[e._v(" Головна картинка "),n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary",small:""},on:{click:e.onEditImage}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-square-edit-outline ")]),e._v(" Редагувати ")],1)],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!e.chosenNews&&e.chosenNews,expression:"!chosenNews && chosenNews"}],ref:"image",attrs:{type:"file",accept:"image/png, image/jpeg, image/svg"},on:{change:e.onChangeEditImg}})],1):n("v-file-input",{attrs:{dense:"",counter:"",label:"Головна картинка",placeholder:"Головна картинка","prepend-icon":"mdi-camera",outlined:"",accept:"image/png, image/jpeg, image/svg","show-size":1e3,rules:e.rules,"error-messages":e.MainImageError,"hide-details":!e.MainImageError.length&&!e.rules.length},on:{change:e.onFileChange},nativeOn:{input:function(t){return e.$v.news.main_img.$touch()}},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.index,r=t.text;return[i<2?n("v-chip",{attrs:{label:"",small:""}},[e._v(" "+e._s(r)+" ")]):2===i?n("span",{staticClass:"text-overline grey--text text--darken-3 mx-2"},[e._v(" +"+e._s(e.news.main_img.length-2)+" File(s) ")]):e._e()]}}],null,!1,3124280233),model:{value:e.news.main_img,callback:function(t){e.$set(e.news,"main_img",t)},expression:"news.main_img"}})],1)],1),n("VRow",[e.showEditorText?n("VCol",[n("div",{staticClass:"editor-view",domProps:{innerHTML:e._s(e.news.content)}})]):n("VCol",[n("vue-editor",{model:{value:e.news.content,callback:function(t){e.$set(e.news,"content",t)},expression:"news.content"}})],1),n("VBtn",{attrs:{icon:"",color:"primary"},on:{click:function(t){e.showEditorText=!e.showEditorText}}},[n("VIcon",[e._v("mdi-eye")])],1)],1)],1),n("VDivider",{staticClass:"mx-5"}),e.news.created_time||!e.chosenNews?n("VCardActions",[n("VSpacer"),n("VBtn",{attrs:{color:"error",text:""},on:{click:e.onCancel}},[e._v(" Скасувати ")]),e.chosenNews?n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onUpdate}},[e._v(" Оновити")]):n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onCreate}},[e._v(" Створити ")])],1):n("VCardActions",[n("VSpacer"),n("v-skeleton-loader",{attrs:{type:"actions"}})],1)],1),n("add-new-category-dialog",{attrs:{visibleAdd:e.visibleAdd},on:{addCategory:e.addCategory,close:function(t){e.visibleAdd=!1}}})],1)},_=[],y=n("5530"),x=n("5873"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{attrs:{transition:"scroll-y-transition"},on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[n("VCard",{attrs:{width:"500"}},[n("VCardTitle",[e._v(" Додати нову категорію новини ")]),n("VCardText",[n("VRow",[n("VCol",[n("VTextField",{attrs:{label:"Назва категорії","prepend-icon":"mdi-shape",outlined:"",dense:"","hide-details":!e.NameError.length,"error-messages":e.NameError},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1)],1)],1),n("VCardActions",[n("VSpacer"),n("VBtn",{attrs:{color:"primary"},on:{click:e.onCreate}},[e._v(" Створити категорію ")])],1)],1)],1)},N=[],k=(n("b0c0"),n("2995")),$=n("1dce"),V=n("b5ae"),j={mixins:[$["validationMixin"]],validations:{category:{required:V["required"]}},props:{visibleAdd:{require:!0}},data:function(){return{category:""}},methods:{onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=15;break}return t.prev=2,n=[],n.name=e.category,t.next=7,k["a"].addSimpleNewCategory(Object(y["a"])({},n));case 7:e.$emit("addCategory",n),e.$v.$reset(),e.category="",t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()}},computed:{NameError:function(){var e=[];return this.$v.category.$dirty?(!this.$v.category.required&&e.push("Назва категорії обов`язкове поле для заповнення"),e):e},visibility:{get:function(){return this.visibleAdd},set:function(){this.category="",this.$emit("close")}}}},R=j,E=Object(w["a"])(R,C,N,!1,null,null,null),L=E.exports,A=n("c1df"),O=n.n(A),S={mixins:[$["validationMixin"]],components:{AddNewCategoryDialog:L,VueEditor:x["a"]},data:function(){return{isLoading:!1,rules:[function(e){return!e||e.size<3e6||"Зображення повинне бути менше 3 MB!"}],categories:[],news:[],visibleAdd:!1,base64image:"",showEditorText:!1}},validations:{news:{title:{maxLength:Object(V["maxLength"])(70),required:V["required"]},main_img:{required:V["required"]},category:{required:V["required"]}}},props:{visible:{require:!1},visibleEdit:{require:!1},chosenNews:{require:!1,default:null}},mounted:function(){this.getCategories(),this.getChosenNews()},methods:{addCategory:function(){this.visibleAdd=!1,this.getCategories()},getChosenNews:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.chosenNews){t.next=12;break}return t.prev=1,t.next=4,k["a"].getSimpleNewsById({id:e.chosenNews});case 4:n=t.sent,e.$v.$touch(),e.news=n,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onCancel:function(){this.news=[],this.$v.$reset(),this.$emit("close")},onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=21;break}return t.prev=2,e.isLoading=!0,n=[],n.title=e.news.title,n.category=e.news.category,n.main_img=e.base64image,n.content=e.news.content,n.created_time=e.getCurrentTime,t.next=12,k["a"].addSimpleNew(Object(y["a"])({},n));case 12:e.news=[],e.$v.$reset(),e.$emit("addNews"),e.isLoading=!1,t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),alert(t.t0);case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},onUpdate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=21;break}return t.prev=2,e.isLoading=!0,n=[],n.id=e.news._id,n.title=e.news.title,n.category=e.news.category,n.content=e.news.content,n.main_img=e.news.main_img,t.next=12,k["a"].updateSimpleNews(Object(y["a"])({},n));case 12:e.$emit("addNews",n),e.news=[],e.$v.$reset(),e.isLoading=!1,t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),alert(t.t0);case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},onEditImage:function(){this.$nextTick((function(){this.$refs.image.click()}))},onChangeEditImg:function(e){console.log(e.target.files[0]),this.onFileChange(e.target.files[0])},onFileChange:function(e){var t=this;if(console.log(e),e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t.base64image=e.target.result,t.chosenNews&&(t.news.main_img=t.base64image)}}},getCategories:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k["a"].getSimpleNewsCategories();case 3:e.categories=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},computed:{getCurrentTime:function(){var e="".concat(O()((new Date).toISOString()).locale("uk").format());return e},visibility:{get:function(){return!0===this.visible?this.visible:this.visibleEdit},set:function(){this.$emit("close")}},CategoryError:function(){var e=[];return this.$v.news.category.$dirty?(!this.$v.news.category.required&&e.push("Категорія обов`язкове поле для заповнення"),e):e},TitleError:function(){var e=[];return this.$v.news.title.$dirty?this.$v.news.title.maxLength?(!this.$v.news.title.required&&e.push("Заголовок обов`язкове поле для заповнення"),e):(e.push("Довжина заголовку має бути менша за 70 символів"),e):e},MainImageError:function(){var e=[];return this.$v.news.main_img.$dirty?(!this.$v.news.main_img.required&&e.push("Головна картинка обов`язкове поле для заповнення"),e):e}}},q=S,T=(n("5e61"),Object(w["a"])(q,b,_,!1,null,null,null)),D=T.exports,I=n("9c03"),B={mixins:[I["a"]],components:{NewsList:f,AddNewDialog:D},data:function(){return{visible:!1,news:[],clickNews:null,categories:[],filter:[],chosenCategory:"",changeNews:[]}},mounted:function(){this.getNews(),console.log(this.news),this.getCategories()},computed:{sortedNews:function(){var e=this;return this.chosenCategory?(console.log(this.chosenCategory),console.log(this.news),Object(d["a"])(this.changeNews=this.news.filter((function(t){return t.category._id==e.chosenCategory})))):this.news}},methods:{changeCategory:function(e){this.chosenCategory=e},addNews:function(){this.visible=!1,this.getNews()},updateNews:function(){this.edit=!1,this.getNews()},showNews:function(e){this.visible=!0,this.clickNews=e._id},deleteNew:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.setLoading(!0),n.next=4,k["a"].deleteSimpleNews({id:e});case 4:t.news=t.news.filter((function(t){return t._id!==e})),t.setLoading(!1),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getNews:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.setLoading(!0),t.next=4,k["a"].getAllNews().then((function(t){e.news=t.result}));case 4:e.changeNews=e.news,e.setLoading(!1),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getCategories:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k["a"].getSimpleNewsCategories();case 3:e.categories=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},showEdit:function(e){this.news=e,this.visibleEdit=!0}}},M=B,F=(n("83c8"),Object(w["a"])(M,c,l,!1,null,"76e3eca5",null)),z=F.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"simple-new"},[n("VRow",{attrs:{justify:"space-between"}},[n("VCol",{attrs:{cols:"3"}},[n("v-select",{attrs:{"prepend-inner-icon":"mdi-filter-variant",items:e.categories,"item-value":"value","item-text":"title",label:"Сортування",outlined:"",clearable:"","hide-details":"",dense:"",rounded:"","menu-props":{bottom:!0,offsetY:!0}},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("v-chip",{attrs:{small:"",color:"primary"}},[e._v(e._s(e.tmpGroup=i.title))])]}}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),n("VCol",{attrs:{cols:"auto"}},[n("VBtn",{attrs:{rounded:"",outlined:"",color:"primary"},on:{click:function(t){e.visible=!0}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-newspaper-plus ")]),e._v("Створити Нещодавну новину ")],1)],1)],1),e.loading?n("VRow",[n("div",{staticClass:"w-100 text-center"},[n("v-progress-circular",{attrs:{color:"primary",indeterminate:""}})],1)]):n("VRow",[n("VCol",[n("NewsList",{attrs:{news:e.news},on:{show:e.showNews,deleteNew:e.deleteNew}})],1)],1),n("AddNewDialog",{attrs:{visible:e.visible,detailNews:e.detailNews,chosenNews:e.isEdit},on:{close:e.close,update:e.onUpdate,create:e.createNews}})],1)},Y=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VRow",[n("VCol",[n("v-item-group",[n("div",[e.news.length>0?n("v-row",{attrs:{justify:"start"}},e._l(e.news,(function(t){return n("v-col",{key:t._id,attrs:{cols:"auto"}},[n("v-card",{staticClass:"align-end new-card",attrs:{width:"300",color:0===t.isArchived?"white":"grey lighten-3"},on:{click:function(n){return e.detailNew(t)}}},[n("v-img",{attrs:{height:"140",cover:"","lazy-src":t.img,src:t.img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}],null,!0)}),n("v-card-actions",[n("VRow",{staticClass:"new-title"},[n("VCol",[n("span",[e._v(e._s(t.title))]),n("div",{staticClass:"timer m-0 p-0"},[e._v(" "+e._s(e.moment(t.created_time).locale("uk").startOf("hours").fromNow()||"--")+" ")])])],1),n("v-spacer"),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on,s=i.attrs;return[n("VBtn",e._g(e._b({attrs:{icon:"",color:"error darken-1"},on:{dblclick:function(n){return e.deleteNew(t._id)},click:function(e){e.stopPropagation()}}},"VBtn",s,!1),r),[n("VIcon",[e._v(" mdi-delete")])],1)]}}],null,!0)},[n("span",[e._v("Щоб видалити, потрібно натиснути двічі")])])],1)],1)],1)})),1):n("v-row",[n("div",{staticClass:"w-100 text-center"},[e._v("Ще немає нещодавних новин")])])],1)])],1)],1)},G=[],J={props:{news:{require:!0}},watch:{news:{deep:!0,handler:function(e){console.log(e)}}},methods:{detailNew:function(e){this.$emit("show",e)},deleteNew:function(e){this.$emit("deleteNew",e)}}},H=J,W=(n("7b15"),Object(w["a"])(H,P,G,!1,null,"7fb20872",null)),K=W.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{attrs:{scrollable:""},on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[n("VCard",{attrs:{width:"700",color:0===e.isArchived?"white":"grey lighten-3",disable:e.isLoading,loading:e.isLoading}},[e.chosenNews?n("VCardTitle",[e._v(" Оновити Нещодавну Новину "),n("VSpacer"),n("VBtn",{attrs:{text:"",color:0===e.isArchived?"error":"grey darken-1"},on:{click:function(t){0===e.isArchived?e.isArchived=1:e.isArchived=0}}},[n("VIcon",{attrs:{left:""}},[e._v(" "+e._s(" mdi-package-"+(0===e.isArchived?"down":"up"))+" ")]),e._v(" "+e._s(0===e.isArchived?"Архівувати":"Розархівувати")+" ")],1)],1):n("VCardTitle",[e._v(" Створити Нещодавну Новину ")]),n("VDivider",{staticClass:"mx-5"}),n("VCardText",[n("VRow",{staticClass:"my-5"},[n("VCol",{staticClass:"pb-0"},[n("VTextField",{attrs:{label:"Заголовок","prepend-icon":"mdi-clipboard-text",outlined:"",dense:"","error-messages":e.TitleError,counter:"",maxlength:"70"},model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1)],1),e.chosenNews?n("VCard",{attrs:{color:0===e.isArchived?"white":"grey lighten-3"}},[n("v-img",{attrs:{height:"140","lazy-src":e.news.img,src:e.news.img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}])}),n("v-card-actions",[e._v(" Головна картинка "),n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary",small:""},on:{click:e.onEditImage}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-square-edit-outline")]),e._v(" Редагувати ")],1)],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"image",attrs:{type:"file",accept:"image/png, image/jpeg, image/svg"},on:{change:e.onChangeEditImg}})],1):n("VRow",[n("VCol",{staticClass:"pt-0"},[n("v-file-input",{attrs:{dense:"",counter:"",label:"Головна картинка",placeholder:"Головна картинка","prepend-icon":"mdi-camera",outlined:"",accept:"image/png, image/jpeg, image/svg","show-size":1e3,rules:e.rules,"error-messages":e.MainImageError},on:{change:e.onFileChange},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.index,r=t.text;return[i<2?n("v-chip",{attrs:{label:"",small:""}},[e._v(" "+e._s(r)+" ")]):2===i?n("span",{staticClass:"text-overline grey--text text--darken-3 mx-2"},[e._v(" +"+e._s(e.news.main_img.length-2)+" File(s) ")]):e._e()]}}],null,!1,3124280233),model:{value:e.news.main_img,callback:function(t){e.$set(e.news,"main_img",t)},expression:"news.main_img"}})],1)],1),e.chosenNews?n("VDivider",{staticClass:"my-5"}):e._e(),n("VRow",[n("VCol",[n("v-textarea",{attrs:{"append-icon":"mdi-information",label:"Інформація",counter:"","no-resize":"",rows:"10",maxlength:"1550",outlined:"","error-messages":e.ContentError,"auto-grow":""},model:{value:e.news.content,callback:function(t){e.$set(e.news,"content",t)},expression:"news.content"}})],1)],1)],1),n("VDivider",{staticClass:"mx-5"}),n("VCardActions",[n("VSpacer"),n("VBtn",{attrs:{color:"error",text:""},on:{click:e.onCancel}},[e._v(" Скасувати ")]),e.chosenNews?n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onUpdate}},[e._v(" Оновити ")]):n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onCreate}},[e._v(" Створити ")])],1)],1)],1)},X=[],Z={mixins:[$["validationMixin"]],data:function(){return{rules:[function(e){return!e||e.size<3e6||"Зображення повинне бути менше 3 MB!"}],isLoading:!1,news:[],base64image:"",isArchived:0}},validations:{news:{title:{maxLength:Object(V["maxLength"])(70),required:V["required"]},main_img:{required:V["required"]},content:{required:V["required"],maxLength:Object(V["maxLength"])(1550)}}},props:{visible:{require:!0},chosenNews:{require:!1},detailNews:{require:!1}},methods:{onCancel:function(){this.news=[],this.$emit("close",this.chosenNews),this.$v.$reset()},onEditImage:function(){this.$nextTick((function(){this.$refs.image.click()}))},onChangeEditImg:function(e){this.onFileChange(e.target.files[0])},onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=22;break}return t.prev=2,e.isLoading=!0,n=[],n.title=e.news.title,n.img=e.base64image,n.created_time=e.getCurrentTime,n.content=e.news.content,t.next=11,k["a"].addCoolNews(Object(y["a"])({},n));case 11:i=t.sent,e.$emit("create",i),e.news=[],e.$v.$reset(),e.isLoading=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](2),e.isLoading=!1,alert(t.t0);case 22:case"end":return t.stop()}}),t,null,[[2,18]])})))()},onUpdate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$v.$touch(),t.prev=1,e.isLoading=!0,n=[],n.id=e.news._id,n.title=e.news.title,n.img=e.base64image||e.news.img,n.content=e.news.content,n.isArchived=e.isArchived,e.$v.$reset(),t.next=12,k["a"].updateCoolNews(Object(y["a"])({},n));case 12:e.$emit("update",e.chosenNews),e.isLoading=!1,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](1),e.isLoading=!1,alert(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))()},onFileChange:function(e){var t=this;if(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t.base64image=e.target.result,t.chosenNews&&(t.news.main_img=t.base64image)}}}},watch:{chosenNews:{deep:!0,handler:function(e){console.log(this.detailNews),this.news=this.detailNews,this.isArchived=this.news.isArchived}}},computed:{visibility:{get:function(){return this.visible},set:function(){this.$emit("close",this.chosenNews)}},getCurrentTime:function(){var e="".concat(O()((new Date).toISOString()).locale("uk").format());return e},TitleError:function(){var e=[];return this.$v.news.title.$dirty?this.$v.news.title.maxLength?(!this.$v.news.title.required&&e.push("Заголовок обов`язкове поле для заповнення"),e):(e.push("Довжина заголовку має бути менша за 70 символів"),e):e},ContentError:function(){var e=[];return this.$v.news.content.$dirty?this.$v.news.content.maxLength?(!this.$v.news.content.required&&e.push("Інформація обов`язкове поле для заповнення"),e):(e.push("Довжина Інфорамації має бути менша за 1550 символів"),e):e},MainImageError:function(){var e=[];return this.$v.news.main_img.$dirty?(!this.$v.news.main_img.required&&e.push("Головна картинка обов`язкове поле для заповнення"),e):e}}},ee=Z,te=Object(w["a"])(ee,Q,X,!1,null,null,null),ne=te.exports,ie={mixins:[I["a"]],components:{NewsList:K,AddNewDialog:ne},data:function(){return{visible:!1,news:[],detailNews:[],isEdit:!1,sceletonLoader:!1,loading:!1,filter:"",categories:[{id:2,title:"Активні",value:"available"},{id:3,title:"Архівовані",value:"archived"}]}},mounted:function(){this.getNews({status:"all"})},watch:{filter:function(e){this.getNews({status:e})}},methods:{showNews:function(e){this.detailNews=e,this.visible=!0,this.isEdit=!0},onUpdate:function(){this.news=[],this.getNews({status:"all"}),this.close()},close:function(){this.isEdit=!1,this.detailNews=[],this.visible=!1},deleteNew:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.setLoading(!0),n.next=4,k["a"].deleteCoolNews({id:e});case 4:t.news=t.news.filter((function(t){return t._id!==e})),t.setLoading(!1),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},createNews:function(e){this.visible=!1,this.news.push(e)},getNews:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},n.prev=1,t.loading=!0,n.next=5,k["a"].getCoolNews(Object(y["a"])({},i));case 5:t.news=n.sent,console.log("news",t.news),t.loading=!1,n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),alert(n.t0);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()}}},re=ie,se=(n("08ac"),Object(w["a"])(re,U,Y,!1,null,"1c49a04e",null)),ae=se.exports,oe={components:{SimpleNewComponent:z,RecentNewsComponent:ae,NewsList:f,AddNewDialog:D},data:function(){return{tabs:null}}},ce=oe,le=Object(w["a"])(ce,a,o,!1,null,"21cf0be9",null),ue=le.exports,de={components:{NewsComponent:ue,AdminWrapper:s["a"]}},me=de,ve=(n("21df"),Object(w["a"])(me,i,r,!1,null,null,null));t["default"]=ve.exports},"5e61":function(e,t,n){"use strict";n("b6809")},"7b15":function(e,t,n){"use strict";n("34e2")},"83c8":function(e,t,n){"use strict";n("f14a")},b6809:function(e,t,n){},bafc:function(e,t,n){},ce0a:function(e,t,n){},e116:function(e,t,n){"use strict";n("049d")},f14a:function(e,t,n){}}]);