(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11e79c82"],{"10d0":function(e,t,n){},2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0"),n("ac1f"),n("00b4");function s(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||a(e)||s(e)||o()}},2995:function(e,t,n){"use strict";var r=n("1da1"),i=(n("96cf"),n("bae0")),a="/api/news",s="/api/newsCategory",o="/api/coolNews";t["a"]={addSimpleNew:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/add"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},getAllNews:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("".concat(a,"/getAllNews"));case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))()},addSimpleNewCategory:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(s,"/addCategory"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},getSimpleNewsCategories:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("".concat(s,"/getAll"));case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))()},updateSimpleNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/update"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},deleteSimpleNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/deleteNews"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},counterViewsSimpleNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/counterViews"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},getSimpleNewsByCategories:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/getByCategory"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},getSimpleNewsById:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/getNewsById"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data[0]);case 4:case"end":return t.stop()}}),t)})))()},searchSimpleNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(a,"/searchNews"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},addCoolNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("params: ",e),t.next=3,i["a"].post("".concat(o,"/addCoolNews"),e);case 3:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 5:case"end":return t.stop()}}),t)})))()},getCoolNews:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("".concat(o,"/getAllCoolNews"));case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))()},searchCoolNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(o,"/searchNews"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},getCoolNewsById:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(o,"/getCoolNewsById"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},updateCoolNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(o,"/updateCoolNews"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()},deleteCoolNews:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post("".concat(o,"/deleteCoolNews"),e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))()}}},3920:function(e,t,n){"use strict";n("10d0")},"3a8f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AdminWrapper",[n("NewsComponent")],1)},i=[],a=n("a2db"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-tabs",{attrs:{"show-arrows":""},model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[n("v-tab",{attrs:{href:"#simpleNews"}},[e._v("Новини")]),n("v-tab",{attrs:{href:"#recentNews"}},[e._v("Круті новини (треба норм назви)")])],1),n("v-tabs-items",{model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[n("v-tab-item",{attrs:{value:"simpleNews"}},[n("VDivider"),n("SimpleNewComponent")],1),n("v-tab-item",{attrs:{value:"recentNews"}},[n("VDivider"),n("RecentNewsComponent")],1)],1)],1)},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"simple-new"},[n("VRow",{attrs:{justify:"space-between",align:"center","no-gutters":""}},[n("VCol",{attrs:{cols:"3"}},[n("v-select",{attrs:{"prepend-inner-icon":"mdi-filter-variant",items:Object.values(e.categories),"item-value":"_id","item-text":"name",label:"Оберіть категорію",outlined:"",clearable:"","hide-details":"",dense:"",rounded:""},on:{change:e.changeCategory},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item;return[n("v-chip",{attrs:{small:"",color:"primary"}},[e._v(e._s(e.tmpGroup=r.name))])]}}]),model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}})],1),n("VCol",{attrs:{cols:"auto"}},[n("VBtn",{attrs:{rounded:"",outlined:"",color:"primary"},on:{click:function(t){e.visible=!0}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-newspaper-plus ")]),e._v("Створити новину ")],1)],1)],1),n("VRow",[n("VCol",[n("NewsList",{attrs:{news:e.sortedNews},on:{show:e.showNews,deleteNew:e.deleteNew}})],1)],1),e.visible?n("AddNewDialog",{attrs:{visible:e.visible,chosenNews:e.clickNews},on:{addNews:e.addNews,close:function(t){e.visible=!1,e.clickNews=null}}}):e._e()],1)},l=[],u=n("1da1"),d=n("2909"),m=(n("96cf"),n("4de4"),n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VRow",[n("VCol",[n("v-item-group",[n("div",[e.news.length>0?n("v-row",{attrs:{"no-gutters":"",justify:"space-around","justify-lg":"space-between","justify-md":"space-between"}},e._l(e.news,(function(t){return n("v-col",{key:t._id,attrs:{cols:"auto"}},[n("v-item",{scopedSlots:e._u([{key:"default",fn:function(r){r.active;return[n("v-card",{staticClass:"align-end mb-10 new-card",attrs:{width:"auto",color:""},on:{click:function(n){return e.detailNew(t)}}},[n("v-btn",{staticClass:"category",attrs:{absolute:"",top:"",left:"",color:"primary",tile:""}},[e._v(" "+e._s(t.category.name)+" ")]),t.main_img?n("v-img",{attrs:{height:"140","lazy-src":t.main_img,src:t.main_img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}],null,!0)}):n("v-img",{attrs:{height:"140",src:"https://picsum.photos/350/165?random"}}),n("v-card-actions",[n("VRow",{staticClass:"new-title"},[n("VCol",{attrs:{cols:"12"}},[n("span",[e._v(e._s(t.title||"--"))]),n("VRow",[n("VCol",{staticClass:"timer",attrs:{cols:"5"}},[e._v(e._s(t.created_time.substr(0,10)||"--"))]),e.moment.duration(e.moment(t.created_time).diff(e.moment())).asDays()<=0&&e.moment.duration(e.moment(t.created_time).diff(e.moment())).asDays()>-1?n("VCol",{staticClass:"timer"},[e._v(" "+e._s(e.moment(t.created_time).locale("uk").startOf("hours").fromNow()||"--")+" ")]):e._e()],1)],1)],1),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"error darken-1"},on:{click:function(n){return n.stopPropagation(),e.onDelete(t)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1)]}}],null,!0)})],1)})),1):n("v-row",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"10vh"}},[e._v("Новин ще немає")])],1)])],1)],1)}),v=[],p={data:function(){return{}},props:{news:{require:!0}},mounted:function(){console.log("Новини",this.news)},methods:{detailNew:function(e){this.$emit("show",e)},onDelete:function(e){this.$emit("deleteNew",e._id)}}},w=p,g=(n("7d41"),n("2877")),h=Object(g["a"])(w,m,v,!1,null,"76b04a00",null),f=h.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[n("VCard",{attrs:{width:"700"}},[e.chosenNews?n("VCardTitle",[n("VRow",{attrs:{align:"center"}},[n("VCol",[e._v("Оновити новину")]),n("VSpacer"),e.news.created_time?n("div",{staticClass:"time"},[e._v(" "+e._s(e.moment(e.news.created_time).locale("uk").format("MMMM Do YYYY, h:mm a")||"--")+" ")]):n("div",{staticClass:"time"},[n("v-skeleton-loader",{attrs:{type:"chip"}})],1)],1)],1):n("VCardTitle",[e._v(" Створити Новину ")]),n("VCardText",[n("VRow",[n("VCol",{attrs:{cols:"6"}},[n("v-select",{attrs:{"prepend-icon":"mdi-shape",items:Object.values(e.categories),"item-value":"_id","item-text":"name",label:"Категорія","error-messages":e.CategoryError,"hide-details":!e.CategoryError.length,outlined:"",clearable:"",dense:""},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item;return[n("v-chip",{attrs:{small:"",color:"primary"}},[e._v(e._s(r.name))])]}}]),model:{value:e.news.category,callback:function(t){e.$set(e.news,"category",t)},expression:"news.category"}})],1),n("VCol",{attrs:{cols:"6"}},[n("VBtn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.visibleAdd=!0}}},[n("VIcon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Додати нову категорію")],1)],1)],1),n("VRow",[n("VCol",[n("VTextField",{attrs:{label:"Заголовок","prepend-icon":"mdi-clipboard-text",outlined:"",dense:"",counter:"70","error-messages":e.TitleError,maxlength:"150"},nativeOn:{input:function(t){return e.$v.news.title.$touch()}},model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1)],1),n("VRow",[n("VCol",[e.chosenNews?n("VCard",[n("v-img",{attrs:{height:"140","lazy-src":e.news.main_img,src:e.news.main_img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}])}),n("v-card-actions",[e._v(" Головна картинка "),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"error"}},[n("v-icon",[e._v("mdi-delete")])],1),n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:e.onEditImage}},[n("v-icon",[e._v("mdi-square-edit-outline")])],1)],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!e.chosenNews&&e.chosenNews,expression:"!chosenNews && chosenNews"}],ref:"image",attrs:{type:"file",accept:"image/png, image/jpeg, image/svg"},on:{change:e.onChangeEditImg}})],1):n("v-file-input",{attrs:{dense:"",counter:"",label:"Головна картинка",placeholder:"Головна картинка","prepend-icon":"mdi-camera",outlined:"",accept:"image/png, image/jpeg, image/svg","show-size":1e3,rules:e.rules,"error-messages":e.MainImageError,"hide-details":!e.MainImageError.length&&!e.rules.length},on:{change:e.onFileChange},nativeOn:{input:function(t){return e.$v.news.main_img.$touch()}},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.index,i=t.text;return[r<2?n("v-chip",{attrs:{label:"",small:""}},[e._v(" "+e._s(i)+" ")]):2===r?n("span",{staticClass:"text-overline grey--text text--darken-3 mx-2"},[e._v(" +"+e._s(e.news.main_img.length-2)+" File(s) ")]):e._e()]}}],null,!1,3124280233),model:{value:e.news.main_img,callback:function(t){e.$set(e.news,"main_img",t)},expression:"news.main_img"}})],1)],1),n("VRow",[e.showEditorText?n("VCol",[n("div",{staticClass:"editor-view",domProps:{innerHTML:e._s(e.news.content)}})]):n("VCol",[n("vue-editor",{model:{value:e.news.content,callback:function(t){e.$set(e.news,"content",t)},expression:"news.content"}})],1),n("VBtn",{attrs:{icon:"",color:"primary"},on:{click:function(t){e.showEditorText=!e.showEditorText}}},[n("VIcon",[e._v("mdi-eye")])],1)],1)],1),e.news.created_time||!e.chosenNews?n("VCardActions",[n("VSpacer"),n("VBtn",{attrs:{color:"error",text:""},on:{click:e.onCancel}},[e._v(" Скасувати ")]),e.chosenNews?n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onUpdate}},[e._v(" Оновити")]):n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onCreate}},[e._v(" Створити ")])],1):n("VCardActions",[n("VSpacer"),n("v-skeleton-loader",{attrs:{type:"actions"}})],1)],1),n("add-new-category-dialog",{attrs:{visibleAdd:e.visibleAdd},on:{addCategory:e.addCategory,close:function(t){e.visibleAdd=!1}}})],1)},x=[],y=n("5530"),_=n("5873"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{attrs:{transition:"scroll-y-transition"},on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[n("VCard",{attrs:{width:"500"}},[n("VCardTitle",[e._v(" Додати нову категорію новини ")]),n("VCardText",[n("VRow",[n("VCol",[n("VTextField",{attrs:{label:"Назва категорії","prepend-icon":"mdi-shape",outlined:"",dense:"","hide-details":!e.NameError.length,"error-messages":e.NameError},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1)],1)],1),n("VCardActions",[n("VSpacer"),n("VBtn",{attrs:{color:"primary"},on:{click:e.onCreate}},[e._v(" Створити категорію ")])],1)],1)],1)},N=[],k=(n("b0c0"),n("2995")),$=n("1dce"),V=n("b5ae"),R={mixins:[$["validationMixin"]],validations:{category:{required:V["required"]}},props:{visibleAdd:{require:!0}},data:function(){return{category:""}},methods:{onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=15;break}return t.prev=2,n=[],n.name=e.category,t.next=7,k["a"].addSimpleNewCategory(Object(y["a"])({},n));case 7:e.$emit("addCategory",n),e.$v.$reset(),e.category="",t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()}},computed:{NameError:function(){var e=[];return this.$v.category.$dirty?(!this.$v.category.required&&e.push("Назва категорії обов`язкове поле для заповнення"),e):e},visibility:{get:function(){return this.visibleAdd},set:function(){this.category="",this.$emit("close")}}}},j=R,O=Object(g["a"])(j,C,N,!1,null,null,null),S=O.exports,L=n("c1df"),E=n.n(L),A={mixins:[$["validationMixin"]],components:{AddNewCategoryDialog:S,VueEditor:_["a"]},data:function(){return{isLoading:!1,rules:[function(e){return!e||e.size<3e6||"Зображення повинне бути менше 3 MB!"}],categories:[],news:[],visibleAdd:!1,base64image:"",showEditorText:!1}},validations:{news:{title:{maxLength:Object(V["maxLength"])(70),required:V["required"]},main_img:{required:V["required"]},category:{required:V["required"]}}},props:{visible:{require:!1},visibleEdit:{require:!1},chosenNews:{require:!1,default:null}},mounted:function(){this.getCategories(),this.getChosenNews()},methods:{addCategory:function(){this.visibleAdd=!1,this.getCategories()},getChosenNews:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.chosenNews){t.next=12;break}return t.prev=1,t.next=4,k["a"].getSimpleNewsById({id:e.chosenNews});case 4:n=t.sent,e.$v.$touch(),e.news=n,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onCancel:function(){this.news=[],this.$v.$reset(),this.$emit("close")},onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=21;break}return t.prev=2,e.isLoading=!0,n=[],n.title=e.news.title,n.category=e.news.category,n.main_img=e.base64image,n.content=e.news.content,n.created_time=e.getCurrentTime,t.next=12,k["a"].addSimpleNew(Object(y["a"])({},n));case 12:e.news=[],e.$v.$reset(),e.$emit("addNews"),e.isLoading=!1,t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),alert(t.t0);case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},onUpdate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=21;break}return t.prev=2,e.isLoading=!0,n=[],n.id=e.news._id,n.title=e.news.title,n.category=e.news.category,n.content=e.news.content,n.main_img=e.news.main_img,t.next=12,k["a"].updateSimpleNews(Object(y["a"])({},n));case 12:e.$emit("addNews",n),e.news=[],e.$v.$reset(),e.isLoading=!1,t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),alert(t.t0);case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},onEditImage:function(){this.$nextTick((function(){this.$refs.image.click()}))},onChangeEditImg:function(e){console.log(e.target.files[0]),this.onFileChange(e.target.files[0])},onFileChange:function(e){var t=this;if(console.log(e),e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t.base64image=e.target.result,t.chosenNews&&(t.news.main_img=t.base64image)}}},getCategories:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k["a"].getSimpleNewsCategories();case 3:e.categories=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},computed:{getCurrentTime:function(){var e="".concat(E()((new Date).toISOString()).locale("uk").format());return e},visibility:{get:function(){return!0===this.visible?this.visible:this.visibleEdit},set:function(){this.$emit("close")}},CategoryError:function(){var e=[];return this.$v.news.category.$dirty?(!this.$v.news.category.required&&e.push("Категорія обов`язкове поле для заповнення"),e):e},TitleError:function(){var e=[];return this.$v.news.title.$dirty?this.$v.news.title.maxLength?(!this.$v.news.title.required&&e.push("Заголовок обов`язкове поле для заповнення"),e):(e.push("Довжина заголовку має бути менша за 70 символів"),e):e},MainImageError:function(){var e=[];return this.$v.news.main_img.$dirty?(!this.$v.news.main_img.required&&e.push("Головна картинка обов`язкове поле для заповнення"),e):e}}},q=A,T=(n("5e61"),Object(g["a"])(q,b,x,!1,null,null,null)),I=T.exports,B=n("9c03"),D={mixins:[B["a"]],components:{NewsList:f,AddNewDialog:I},data:function(){return{visible:!1,news:[],clickNews:null,categories:[],filter:[],chosenCategory:"",changeNews:[]}},mounted:function(){this.getNews(),console.log(this.news),this.getCategories()},computed:{sortedNews:function(){var e=this;return this.chosenCategory?(console.log(this.chosenCategory),console.log(this.news),Object(d["a"])(this.changeNews=this.news.filter((function(t){return t.category._id==e.chosenCategory})))):this.news}},methods:{changeCategory:function(e){this.chosenCategory=e},addNews:function(){this.visible=!1,this.getNews()},updateNews:function(){this.edit=!1,this.getNews()},showNews:function(e){this.visible=!0,this.clickNews=e._id},deleteNew:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.setLoading(!0),n.next=4,k["a"].deleteSimpleNews({id:e});case 4:t.news=t.news.filter((function(t){return t._id!==e})),t.setLoading(!1),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getNews:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.setLoading(!0),t.next=4,k["a"].getAllNews();case 4:e.news=t.sent,e.changeNews=e.news,e.setLoading(!1),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getCategories:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k["a"].getSimpleNewsCategories();case 3:e.categories=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},showEdit:function(e){this.news=e,this.visibleEdit=!0}}},M=D,F=(n("3920"),Object(g["a"])(M,c,l,!1,null,"9deea23e",null)),z=F.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"simple-new"},[n("VRow",{staticClass:"p-1",attrs:{justify:"end"}},[n("VBtn",{attrs:{rounded:"",outlined:"",color:"primary"},on:{click:function(t){e.visible=!0}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-newspaper-plus ")]),e._v("Створити круту новину ")],1)],1),n("VRow",[n("VCol",[n("NewsList",{attrs:{news:e.news},on:{deleteNew:e.deleteNew}})],1)],1),n("AddNewDialog",{attrs:{visible:e.visible},on:{close:function(t){e.visible=!1},create:e.createNews}})],1)},Y=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VRow",[n("VCol",[n("v-item-group",[n("div",[e.news.length>0?n("v-row",{attrs:{justify:"space-around","justify-lg":"space-between"}},e._l(e.news,(function(t){return n("v-col",{key:t._id,attrs:{cols:"auto"}},[n("v-item",{scopedSlots:e._u([{key:"default",fn:function(r){r.active;var i=r.toggle;return[n("v-card",{staticClass:"align-end new-card",attrs:{width:"auto",color:""},on:{click:i}},[n("v-img",{attrs:{height:"140",cover:"","lazy-src":t.img,src:t.img},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0 ",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary "}})],1)]},proxy:!0}],null,!0)}),n("v-card-actions",[n("VRow",{staticClass:"new-title"},[n("VCol",[n("span",[e._v(e._s(t.title))]),n("div",{staticClass:"timer m-0 p-0"},[e._v(" "+e._s(e.moment(t.created_time).locale("uk").startOf("hours").fromNow()||"--")+" ")])])],1),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"error darken-1"},on:{click:function(n){return n.stopPropagation(),e.deleteNew(t._id)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1)]}}],null,!0)})],1)})),1):n("v-row",[n("div",[e._v("Ще немає крутих новин")])])],1)])],1)],1)},J=[],W={props:{news:{require:!0}},watch:{news:{deep:!0,handler:function(e){console.log(e)}}},methods:{deleteNew:function(e){this.$emit("deleteNew",e)}}},G=W,H=(n("dab3"),Object(g["a"])(G,P,J,!1,null,"76605a9b",null)),K=H.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VDialog",{on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[n("VCard",{attrs:{width:"700"}},[e.chosenNews?n("VCardTitle",[e._v(" Оновити Круту Новину ")]):n("VCardTitle",[e._v(" Створити Круту Новину ")]),n("VCardText",[n("VRow",[n("VCol",[n("VTextField",{attrs:{label:"Заголовок","prepend-icon":"mdi-clipboard-text",outlined:"",dense:"","error-messages":e.TitleError,counter:"",maxlength:"70"},model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1)],1),n("VRow",[n("VCol",[n("v-file-input",{attrs:{dense:"",counter:"",label:"Головна картинка",placeholder:"Головна картинка","prepend-icon":"mdi-camera",outlined:"",accept:"image/png, image/jpeg, image/svg","show-size":1e3,rules:e.rules,"error-messages":e.MainImageError},on:{change:e.onFileChange},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.index,i=t.text;return[r<2?n("v-chip",{attrs:{label:"",small:""}},[e._v(" "+e._s(i)+" ")]):2===r?n("span",{staticClass:"text-overline grey--text text--darken-3 mx-2"},[e._v(" +"+e._s(e.news.main_img.length-2)+" File(s) ")]):e._e()]}}]),model:{value:e.news.main_img,callback:function(t){e.$set(e.news,"main_img",t)},expression:"news.main_img"}})],1)],1)],1),n("VCardActions",[n("VSpacer"),n("VBtn",{attrs:{color:"error",text:""},on:{click:e.onCancel}},[e._v(" Скасувати ")]),e.chosenNews?n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onUpdate}},[e._v(" Оновити ")]):n("VBtn",{attrs:{color:"primary",disabled:e.isLoading,loading:e.isLoading},on:{click:e.onCreate}},[e._v(" Створити ")])],1)],1)],1)},X=[],Z={mixins:[$["validationMixin"]],data:function(){return{rules:[function(e){return!e||e.size<3e6||"Зображення повинне бути менше 3 MB!"}],isLoading:!1,news:[],base64image:""}},validations:{news:{title:{maxLength:Object(V["maxLength"])(70),required:V["required"]},main_img:{required:V["required"]}}},props:{visible:{require:!0},chosenNews:{require:!1}},methods:{onCancel:function(){this.news=[],this.$emit("close"),this.$v.$reset()},onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=20;break}return t.prev=2,e.isLoading=!0,n=[],n.title=e.news.title,n.img=e.base64image,n.created_time=e.getCurrentTime,t.next=10,k["a"].addCoolNews(Object(y["a"])({},n));case 10:r=t.sent,e.$emit("create",r),e.news=[],e.$v.$reset(),e.isLoading=!1,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),alert(t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})))()},onUpdate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],n.title=e.news.title,n.img=e.base64image,e.$emit("close"),t.next=6,k["a"].updateCoolNews(Object(y["a"])({},n));case 6:case"end":return t.stop()}}),t)})))()},onFileChange:function(e){var t=this;if(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t.base64image=e.target.result,t.chosenNews&&(t.news.main_img=t.base64image)}}}},computed:{visibility:{get:function(){return this.visible},set:function(){this.$emit("close")}},getCurrentTime:function(){var e="".concat(E()((new Date).toISOString()).locale("uk").format());return e},TitleError:function(){var e=[];return this.$v.news.title.$dirty?this.$v.news.title.maxLength?(!this.$v.news.title.required&&e.push("Заголовок обов`язкове поле для заповнення"),e):(e.push("Довжина заголовку має бути менша за 70 символів"),e):e},MainImageError:function(){var e=[];return this.$v.news.main_img.$dirty?(!this.$v.news.main_img.required&&e.push("Головна картинка обов`язкове поле для заповнення"),e):e}}},ee=Z,te=Object(g["a"])(ee,Q,X,!1,null,null,null),ne=te.exports,re={mixins:[B["a"]],components:{NewsList:K,AddNewDialog:ne},data:function(){return{visible:!1,news:[],sceletonLoader:!1}},mounted:function(){this.getNews()},methods:{deleteNew:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.setLoading(!0),n.next=4,k["a"].deleteCoolNews({id:e});case 4:t.news=t.news.filter((function(t){return t._id!==e})),t.setLoading(!1),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},createNews:function(e){this.visible=!1,this.news.push(e)},getNews:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.setLoading(!0),t.next=4,k["a"].getCoolNews();case 4:e.news=t.sent,e.setLoading(!1),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ie=re,ae=(n("b52c"),Object(g["a"])(ie,U,Y,!1,null,"82367112",null)),se=ae.exports,oe={components:{SimpleNewComponent:z,RecentNewsComponent:se,NewsList:f,AddNewDialog:I},data:function(){return{tabs:null}}},ce=oe,le=Object(g["a"])(ce,s,o,!1,null,"0eb0ee3c",null),ue=le.exports,de={components:{NewsComponent:ue,AdminWrapper:a["a"]}},me=de,ve=Object(g["a"])(me,r,i,!1,null,null,null);t["default"]=ve.exports},"3fca":function(e,t,n){},"5e61":function(e,t,n){"use strict";n("f7a9")},"7d41":function(e,t,n){"use strict";n("3fca")},b52c:function(e,t,n){"use strict";n("e959")},dab3:function(e,t,n){"use strict";n("e221")},e221:function(e,t,n){},e959:function(e,t,n){},f7a9:function(e,t,n){}}]);